<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="计算机网络复习笔记-数据链路层"><meta name="keywords" content="网络"><meta name="author" content="iLern"><meta name="copyright" content="iLern"><title>计算机网络复习笔记-数据链路层 | iLern's Blog</title><link rel="shortcut icon" href="/ilern.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#链路层的基本功能"><span class="toc-number">1.</span> <span class="toc-text">链路层的基本功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#封装成帧"><span class="toc-number">1.1.</span> <span class="toc-text">封装成帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#透明传输"><span class="toc-number">1.2.</span> <span class="toc-text">透明传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#差错控制-差错检测"><span class="toc-number">1.3.</span> <span class="toc-text">差错控制 / 差错检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CRC"><span class="toc-number">1.4.</span> <span class="toc-text">CRC</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#点对点协议-PPP"><span class="toc-number">2.</span> <span class="toc-text">点对点协议 PPP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#需要满足的要求"><span class="toc-number">2.1.</span> <span class="toc-text">需要满足的要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不需要的功能"><span class="toc-number">2.2.</span> <span class="toc-text">不需要的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组成部分"><span class="toc-number">2.3.</span> <span class="toc-text">组成部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#帧格式"><span class="toc-number">2.4.</span> <span class="toc-text">帧格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#字节填充"><span class="toc-number">2.4.1.</span> <span class="toc-text">　字节填充</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#零比特填充"><span class="toc-number">2.4.2.</span> <span class="toc-text">零比特填充</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#同步传输"><span class="toc-number">2.4.3.</span> <span class="toc-text">同步传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#异步传输"><span class="toc-number">2.4.4.</span> <span class="toc-text">异步传输</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#工作流程"><span class="toc-number">2.5.</span> <span class="toc-text">工作流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#挑战握手认证协议-CHAP"><span class="toc-number">2.6.</span> <span class="toc-text">挑战握手认证协议 CHAP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用广播信道的数据链路层"><span class="toc-number">3.</span> <span class="toc-text">使用广播信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#以太网"><span class="toc-number">3.1.</span> <span class="toc-text">以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#为什么说以太网很简便"><span class="toc-number">3.1.1.</span> <span class="toc-text">为什么说以太网很简便</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#适配器"><span class="toc-number">3.2.</span> <span class="toc-text">适配器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CSMA-CD协议"><span class="toc-number">4.</span> <span class="toc-text">CSMA/CD协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#站模型"><span class="toc-number">4.1.</span> <span class="toc-text">　站模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#单信道假设"><span class="toc-number">4.2.</span> <span class="toc-text">单信道假设</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#冲突假设"><span class="toc-number">4.3.</span> <span class="toc-text">冲突假设</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#时间假设"><span class="toc-number">4.4.</span> <span class="toc-text">时间假设</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#侦听假设"><span class="toc-number">4.5.</span> <span class="toc-text">　侦听假设</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#传播时延对载波侦听的影响"><span class="toc-number">4.6.</span> <span class="toc-text">传播时延对载波侦听的影响</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CSMA-CD的重要特性"><span class="toc-number">4.7.</span> <span class="toc-text">CSMA/CD的重要特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关于碰撞"><span class="toc-number">4.8.</span> <span class="toc-text">关于碰撞</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#争用期"><span class="toc-number">4.8.1.</span> <span class="toc-text">争用期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#截断二进制指数类型退避算法"><span class="toc-number">4.8.2.</span> <span class="toc-text">截断二进制指数类型退避算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#碰撞发生后"><span class="toc-number">4.8.3.</span> <span class="toc-text">碰撞发生后</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s2.ax1x.com/2019/01/26/knOvb8.png"></div><div class="author-info__name text-center">iLern</div><div class="author-info__description text-center">功名沉浮不必提，稚志初衷别忘记</div><div class="follow-button"><a href="https://github.com/iLern">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">152</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">76</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">14</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="http://blog.csdn.net/lyx_2016/article/">lyx</a><a class="author-info-links__name text-center" href="https://oi.men.ci/">Menci</a><a class="author-info-links__name text-center" href="https://5261.github.io">Hellc</a><a class="author-info-links__name text-center" href="https://sulfur6.github.io/">团长</a><a class="author-info-links__name text-center" href="http://iovo7.com">iovo7</a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">iLern's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span></div><div id="post-info"><div id="post-title">计算机网络复习笔记-数据链路层</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-10-15</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/计算机网络/">计算机网络</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><ul>
<li><p>数据链路层的信道种类</p>
<ul>
<li>点对点信道<ul>
<li>一对一通信</li>
</ul>
</li>
<li>广播信道<ul>
<li>一对多</li>
<li>需要专门的协议</li>
</ul>
</li>
</ul>
</li>
<li><p>链路与数据链路</p>
<ul>
<li>链路指一条无源的点到点的线路</li>
<li>物理线路加上通信协议 / 实现通信协议的软硬件就形成了数据链路</li>
</ul>
</li>
<li><p>数据链路层的传输单位是帧 Frame</p>
</li>
<li><p>数据链路层解决的三个基本问题</p>
<ul>
<li>封装成帧</li>
<li>透明传输</li>
<li>差错控制</li>
</ul>
</li>
</ul>
<a id="more"></a>
<h2 id="链路层的基本功能"><a href="#链路层的基本功能" class="headerlink" title="链路层的基本功能"></a>链路层的基本功能</h2><h3 id="封装成帧"><a href="#封装成帧" class="headerlink" title="封装成帧"></a>封装成帧</h3><ul>
<li>添加首部尾部进行帧定界 <code>SOH</code> Start_of_header <code>EOT</code> End_of_transmission</li>
<li>帧定界符是特殊的控制字符</li>
</ul>
<h3 id="透明传输"><a href="#透明传输" class="headerlink" title="透明传输"></a>透明传输</h3><ul>
<li>透明就是不透明</li>
<li>透明传输使得不用关心下层的传输，所采用的设备只是一个通道的作用</li>
<li>当传输二进制文件中出现定界符序列时，在这个序列之前添加<code>ESC</code>进行转义</li>
<li>称为 字节填充 / 字符填充<ul>
<li>在前面的非归零反相编码 NRZI 中有提到比特位填充 <code>bit_stuffing</code></li>
</ul>
</li>
<li>先转义还是先封装?</li>
</ul>
<h3 id="差错控制-差错检测"><a href="#差错控制-差错检测" class="headerlink" title="差错控制 / 差错检测"></a>差错控制 / 差错检测</h3><ul>
<li>误码率 BER<ul>
<li>$P_e = \frac{N_e}{N}$</li>
<li>传错的除以总的</li>
</ul>
</li>
<li>噪声的类型<ul>
<li>热噪声<ul>
<li>时刻存在、强度低</li>
<li>高斯白噪声</li>
<li>引起随机差错</li>
</ul>
</li>
<li>冲击噪声<ul>
<li>外界电磁干扰引起、强度高</li>
<li>闪电</li>
<li>引起突发错</li>
</ul>
</li>
</ul>
</li>
<li>纠错码与检错码<ul>
<li>纠错码适用于错误出现多的情况，可以由接收方发现错误并纠正</li>
<li>检错码适用于错误出现较少的地方，例如有线网络，发现出错后不进行纠正，直接抛弃</li>
</ul>
</li>
<li>常用检错码<ul>
<li>奇偶校验<ul>
<li>最后添加一个校验位</li>
<li>统计数据码中1的个数</li>
</ul>
</li>
<li>循环冗余编码CRC<ul>
<li>有纠错能力，但是数据链路层只用它来检错</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="CRC"><a href="#CRC" class="headerlink" title="CRC"></a>CRC</h3><ul>
<li>生成多项式<ul>
<li>除数，长度为生成多项式最高项的次数，翻译为二进制为多项式每一项的系数</li>
</ul>
</li>
<li>FCS<ul>
<li>帧检验序列</li>
<li>CRC是生成FCS的一种方法但不是唯一方法</li>
</ul>
</li>
<li>无差错接受<ul>
<li>凡是接受的帧，都可以以非常接近于1的概率认为它正确的</li>
<li>也有可能因为噪声，所有的位变成了0，但是概率非常小</li>
</ul>
</li>
</ul>
<h2 id="点对点协议-PPP"><a href="#点对点协议-PPP" class="headerlink" title="点对点协议 PPP"></a>点对点协议 PPP</h2><ul>
<li>PPP 既能面向Bit也能面向字节 / 字符</li>
<li>点对点通信</li>
<li>只支持全双工</li>
<li>使用广域网进行串行通信</li>
</ul>
<h3 id="需要满足的要求"><a href="#需要满足的要求" class="headerlink" title="需要满足的要求"></a>需要满足的要求</h3><ul>
<li>简单</li>
<li>链路层功能<ul>
<li>封装成帧</li>
<li>透明性</li>
<li>差错检测</li>
</ul>
</li>
<li>对上与对下<ul>
<li>多种网络层协议</li>
<li>多种类型链路</li>
</ul>
</li>
<li>检测连接状态</li>
<li>最大传送单元<ul>
<li>MTU</li>
<li>不包含帧头帧尾</li>
<li>发送过程中逐步进行调整</li>
<li>高层协议根据链路层的MTU进行分片</li>
</ul>
</li>
<li>网络层地址协商</li>
<li>数据压缩协商</li>
</ul>
<h3 id="不需要的功能"><a href="#不需要的功能" class="headerlink" title="不需要的功能"></a>不需要的功能</h3><ul>
<li><p>纠错</p>
<ul>
<li>链路层不要求可靠性</li>
</ul>
</li>
<li><p>流量控制</p>
<ul>
<li>流量来自于端系统的进程，进程间通信由TCP协议负责</li>
</ul>
</li>
<li><p>序号</p>
<ul>
<li>PPP不保证可靠性</li>
<li>实际上链路层的传输本就很可靠</li>
</ul>
</li>
<li><p>多点链路</p>
<ul>
<li>PPP只支持点对点</li>
</ul>
</li>
<li><p>半双工 / 单工链路</p>
<p>PPP只支持全双工链路</p>
</li>
</ul>
<h3 id="组成部分"><a href="#组成部分" class="headerlink" title="组成部分"></a>组成部分</h3><ul>
<li>一个将IP数据报封装到串行链路的方法<ul>
<li>面向字符的异步链路</li>
<li>面向比特的同步链路</li>
</ul>
</li>
<li>链路控制协议 <code>LCP</code> Link Control Protocol<ul>
<li>与物理层交互</li>
</ul>
</li>
<li><strong>一套</strong>网络控制协议 <code>NCP</code> Network Control Protocol<ul>
<li>与网络层交互</li>
<li>每个协议支持一种不同的网络层协议</li>
</ul>
</li>
</ul>
<h3 id="帧格式"><a href="#帧格式" class="headerlink" title="帧格式"></a>帧格式</h3><ul>
<li>首部<ul>
<li>定界符 / 定界字节序列　　0x7E</li>
<li>AC 固定的两个部分，但是说不准以后会有用</li>
<li>协议<ul>
<li>0x0021 信息部分为IP数据报</li>
<li>0xC021 信息部分位PPP链路控制数据</li>
<li>0x8021 信息部分位网络控制数据</li>
</ul>
</li>
</ul>
</li>
<li>信息部分<ul>
<li>IP数据报</li>
</ul>
</li>
<li>尾部<ul>
<li>CRC检验序列<ul>
<li>从AC开始到信息部分结束</li>
<li>万一以后AC部分有用呢</li>
</ul>
</li>
<li>定界符 / 定界字节序列        0x7E</li>
</ul>
</li>
</ul>
<h4 id="字节填充"><a href="#字节填充" class="headerlink" title="　字节填充"></a>　字节填充</h4><ul>
<li>出现控制字符时，前面添加转义字符0x7D，同时第六个bit取反</li>
</ul>
<h4 id="零比特填充"><a href="#零比特填充" class="headerlink" title="零比特填充"></a>零比特填充</h4><ul>
<li>SONET / SDH使用同步传输，同步传输中没有 <strong>字符</strong> 的概念</li>
<li>0x7E = 0111 1110</li>
<li>5个连续1之后插一个0，保证不出现连续6个1，就不会出现定界符</li>
</ul>
<h4 id="同步传输"><a href="#同步传输" class="headerlink" title="同步传输"></a>同步传输</h4><ul>
<li>使用时钟信号线或前同步序列保证发送端与接收端的时钟保持同步</li>
<li>以数据帧位单位传输</li>
</ul>
<h4 id="异步传输"><a href="#异步传输" class="headerlink" title="异步传输"></a>异步传输</h4><ul>
<li>以字符为单位传输</li>
<li>每个字符前添加起始位0，后面加停止位1，表示数据的开始和结束</li>
</ul>
<h3 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h3><p>连接从下往上建立，从上往下释放</p>
<ul>
<li>调制解调器建立物理连接</li>
<li>PC向路由器发送一系列的LCP分组 （0xC021）建立LCP连接</li>
<li>NCP给新接入的PC分配一个临时的IP地址</li>
<li>通信</li>
<li>NCP释放网络层链接，收回临时IP</li>
<li>LCP释放数据链路层连接</li>
<li>释放物理层链接</li>
</ul>
<h3 id="挑战握手认证协议-CHAP"><a href="#挑战握手认证协议-CHAP" class="headerlink" title="挑战握手认证协议 CHAP"></a>挑战握手认证协议 CHAP</h3><p>在初始链路建立时完成，也可以在链路建立后的任何时刻进行</p>
<h2 id="使用广播信道的数据链路层"><a href="#使用广播信道的数据链路层" class="headerlink" title="使用广播信道的数据链路层"></a>使用广播信道的数据链路层</h2><ul>
<li><p>IEEE 局域网标准</p>
<ul>
<li>IEEE 802.3     CSMA/CD</li>
<li>IEEE 802.4     令牌总线</li>
<li>IEEE 802.5     令牌环</li>
</ul>
</li>
<li><p>局域网的特点</p>
<ul>
<li>网络为一个单位所拥有，地理范围和站点数目均有限</li>
</ul>
</li>
<li>局域网的拓扑结构<ul>
<li>环形    环形令牌网</li>
<li>总线 <ul>
<li>两端带有匹配电阻吸收电磁波信号的能量</li>
<li>CSMA/CD</li>
</ul>
</li>
<li>星形</li>
<li>树形</li>
</ul>
</li>
<li>共享信道<ul>
<li>静态划分   不能适用于网络的突发性</li>
<li>动态接入<ul>
<li>随机接入    需要解决冲突</li>
<li>受控接入</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="以太网"><a href="#以太网" class="headerlink" title="以太网"></a>以太网</h3><ul>
<li><p>使用<strong>曼彻斯特编码</strong>进行数据传输</p>
<ul>
<li>不需要尾部的定界符</li>
<li>可以在$1 \over 2$ 处不跳变</li>
</ul>
</li>
<li><p>数据链路层的子层</p>
<ul>
<li>LLC Logical Link Control<ul>
<li>面向上层，与传输媒体无关</li>
</ul>
</li>
<li>MAC Medium Access Control<ul>
<li>面向下层</li>
<li>数据帧真正完成封装的位置</li>
</ul>
</li>
<li>MAC 子层的功能<ul>
<li>数据真的封装/卸装</li>
<li>帧的寻址和识别</li>
<li>帧的接受和发送</li>
<li>链路的管理</li>
<li>帧的差错控制</li>
<li>仲裁介质的使用权</li>
</ul>
</li>
</ul>
</li>
<li>LLC 子层的功能<ul>
<li>识别网络层协议，进行封装，加上一个LLC报头</li>
<li>接收方可识别使用了何种局域网</li>
<li>以太网一统天下，LLC实际作用不大</li>
</ul>
</li>
</ul>
<h4 id="为什么说以太网很简便"><a href="#为什么说以太网很简便" class="headerlink" title="为什么说以太网很简便"></a>为什么说以太网很简便</h4><ul>
<li>无连接</li>
<li>不编号，不要求对方发回确认</li>
<li>提供不可靠的最大努力交付，高层发现丢失了一些数据帧并进行重传，但是以太网并不知道这是一个重传的帧，而是完全当作一个新的数据帧来发送</li>
</ul>
<h3 id="适配器"><a href="#适配器" class="headerlink" title="适配器"></a>适配器</h3><p>适配器既有链路层的功能，也有物理层的功能</p>
<ul>
<li>适配器的主要功能<ul>
<li>串行/并行转换</li>
<li>数据缓存</li>
<li>安装设备驱动程序（设备与CPU通信的媒介）</li>
<li>实现以太网协议</li>
</ul>
</li>
</ul>
<h2 id="CSMA-CD协议"><a href="#CSMA-CD协议" class="headerlink" title="CSMA/CD协议"></a>CSMA/CD协议</h2><ul>
<li><p>CSMA/CD 是<strong>随机征用型</strong>的介质访问控制方法</p>
</li>
<li><p>载波监听 多点接入 with 冲突检测</p>
<ul>
<li>载波监听  每个站在发送数据前都要检测总线上是否有其他站在发信息</li>
<li>多点接入  多个站点连接在一根总线上</li>
<li>冲突检测  边发送数据边检测信道上的信号电压大小，当发现冲突时做出相应处理</li>
</ul>
</li>
<li><p>Carrier Sense Multiple Access with Collision Detection</p>
</li>
</ul>
<h3 id="站模型"><a href="#站模型" class="headerlink" title="　站模型"></a>　站模型</h3><p>各个站点相互独立，以固定速率产生数据帧。某个站点一旦产生新帧，即使被阻塞，也不会有新的帧产生，直到发送完毕</p>
<h3 id="单信道假设"><a href="#单信道假设" class="headerlink" title="单信道假设"></a>单信道假设</h3><p>所有通信都是通过单信道进行，任何时刻仅允许一个站点发送，需要争用发送权</p>
<h3 id="冲突假设"><a href="#冲突假设" class="headerlink" title="冲突假设"></a>冲突假设</h3><p>若两帧同时发送，则产生冲突，所有站点都能检测冲突，冲突的帧必须重发</p>
<h3 id="时间假设"><a href="#时间假设" class="headerlink" title="时间假设"></a>时间假设</h3><p>帧可以在任意时刻发送</p>
<h3 id="侦听假设"><a href="#侦听假设" class="headerlink" title="　侦听假设"></a>　侦听假设</h3><p>所有站点都可以侦听到当前信道的状态，若忙则等待</p>
<p>但是当某个站监听到总线是空闲时，可能总线并不是真正空闲，因为信号的传播需要时间，也就是之前提到过的<strong>传播时延</strong></p>
<p>策略：</p>
<ul>
<li>非坚持     忙则不等，过会再来看</li>
<li>１坚持    一直等待，直到空闲</li>
<li>Ｐ坚持    以概率为P进行等待</li>
</ul>
<h3 id="传播时延对载波侦听的影响"><a href="#传播时延对载波侦听的影响" class="headerlink" title="传播时延对载波侦听的影响"></a>传播时延对载波侦听的影响</h3><p>A在 $t=0$ 时刻发送信号，B在$t = \tau - \delta$ 发送信号，两者信号在 $t = \tau - \frac{\delta}{2}$ 时刻碰撞，B在$t = \tau$时刻检测到碰撞，A在$t=2\tau-\delta$ 时刻检测到碰撞，$\tau$指传播时间。</p>
<p><img src="IMG_4731.PNG" alt="IMG_4731"></p>
<p>先发送的一方较后检测到冲突。</p>
<h3 id="CSMA-CD的重要特性"><a href="#CSMA-CD的重要特性" class="headerlink" title="CSMA/CD的重要特性"></a>CSMA/CD的重要特性</h3><ul>
<li>CSMA/CD不能进行全双工通信，只能进行半双工通信 （而PPP只支持全双工通信）</li>
<li>每个站在发送数据之后的一段时间内，存在着遭遇碰撞的可能性<ul>
<li>时间的从长短取决于发送方到接收方的距离</li>
</ul>
</li>
<li>发送的不确定性使得整个以太网的平均通信两远小于以太网的最高数据率<ul>
<li>以太网不能保证某一时间内一定能把自己的数据帧成功发出去</li>
</ul>
</li>
<li>因此以太网必须轻负载，百分之三十左右</li>
</ul>
<h3 id="关于碰撞"><a href="#关于碰撞" class="headerlink" title="关于碰撞"></a>关于碰撞</h3><h4 id="争用期"><a href="#争用期" class="headerlink" title="争用期"></a>争用期</h4><p>在发送数据后至多 $2\tau$ 时间可以知道是否发生冲突，这段时间称为<strong>争用期</strong>或<strong>碰撞窗口</strong>，经过这段时间后还没有检测到碰撞，则说明本次传输不会发生碰撞</p>
<ul>
<li>所有以太网取 $51.2 \mu s$ 作为争用期长度<ul>
<li>以太网的设计决定了最长的2RTT不会超过 $51.2 \mu s$ </li>
</ul>
</li>
<li>对于 10Mb/s 的以太网，争用期内可以发送 512bit 即 64 字节<ul>
<li>发生冲突一定是在前64字节以内</li>
<li>最短的有效帧长为64字节</li>
</ul>
</li>
<li>或者说争用期的长度是512比特时间</li>
</ul>
<h4 id="截断二进制指数类型退避算法"><a href="#截断二进制指数类型退避算法" class="headerlink" title="截断二进制指数类型退避算法"></a>截断二进制指数类型退避算法</h4><ul>
<li>碰撞之后退避一段时间再发送</li>
<li>基本退避时间是$ 2\tau $ ，在此基础上乘以$[0, 1, \dots, (2^k - 1)]$中随机一个数，$k$是重传次数，最大为$10$</li>
<li>重传$16$次还是失败，直接丢弃</li>
<li>会出现<strong>捕获效应</strong>，越退越倒霉</li>
</ul>
<h4 id="碰撞发生后"><a href="#碰撞发生后" class="headerlink" title="碰撞发生后"></a>碰撞发生后</h4><ul>
<li><p>检测到碰撞立即停止发送数据，并发送干扰信号，让其他主机知道发生了碰撞</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: Start</span><br><span class="line">op=&gt;operation: 从网络层获得数据，</span><br><span class="line">成帧，准备发送</span><br><span class="line">op2=&gt;operation: 发送信息</span><br><span class="line">op3=&gt;operation: 停止后发送干扰</span><br><span class="line">op4=&gt;operation: 放弃本次发送</span><br><span class="line">op5=&gt;operation: 延时r个争用期</span><br><span class="line"></span><br><span class="line">cond=&gt;condition: 有载波?</span><br><span class="line">cond2=&gt;condition: 出现冲突?</span><br><span class="line">cond3=&gt;condition: 发送完成?</span><br><span class="line">cond4=&gt;condition: 冲突过多?</span><br><span class="line">e=&gt;end</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;op</span><br><span class="line">cond(no)-&gt;op2</span><br><span class="line">op2-&gt;cond2</span><br><span class="line">cond2(yes)-&gt;op3</span><br><span class="line">op3-&gt;cond4</span><br><span class="line">cond4(yes)-&gt;op4</span><br><span class="line">op4-&gt;e</span><br><span class="line">cond4(no)-&gt;op5</span><br><span class="line">op5-&gt;cond</span><br><span class="line">cond2(no)-&gt;cond3</span><br><span class="line">cond3(yes)-&gt;e</span><br><span class="line">cond3(no)-&gt;op2</span><br></pre></td></tr></table></figure>
</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">iLern</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://ilern.github.io/2020/10/15/计算机网络复习笔记-数据链路层/">http://ilern.github.io/2020/10/15/计算机网络复习笔记-数据链路层/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/网络/">网络</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/10/15/操作系统学习笔记-进程同步/"><i class="fa fa-chevron-left">  </i><span>操作系统学习笔记-进程同步</span></a></div><div class="next-post pull-right"><a href="/2020/02/22/learn_SQL/"><span>SQL学习笔记</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2016 - 2020 By iLern</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://ilern.github.io/">blog</a>!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="/js/search/local-search.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>